<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Playfair Cipher - Classical Ciphers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="CSS/styles.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  </head>
  <body>
    <main class="container mt-4">
      <!-- Header -->
      <div class="cipher-header mb-3">
        <h1 class="display-4"><i class="fas fa-th-large text-warning me-3"></i>Playfair Cipher</h1>
        <span class="me-3">
          <a href="#" data-bs-toggle="modal" data-bs-target="#descModal" title="Mô tả thuật toán">
            <i class="fas fa-info-circle text-info fs-3"></i>
          </a>
        </span>
        <span>
          <a href="#" data-bs-toggle="modal" data-bs-target="#extraModal" title="Thông tin bổ sung">
            <i class="fas fa-lightbulb text-warning fs-3"></i>
          </a>
        </span>
      </div>

      <!-- Modal: Mô tả thuật toán -->
      <div class="modal fade" id="descModal" tabindex="-1" aria-labelledby="descModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content bg-detail text-light">
            <div class="modal-header border-0">
              <h5 class="modal-title" id="descModalLabel"><i class="fas fa-info-circle text-primary me-2"></i>Mô tả thuật toán</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Playfair Cipher là một phương pháp mã hóa thay thế đôi, sử dụng ma trận 5x5 để mã hóa các cặp ký tự. Đây là một trong những hệ thống mã hóa cổ điển phổ biến nhất.</p>
              <ul class="mt-3">
                <li><strong>Lịch sử:</strong> Phát minh bởi Charles Wheatstone, phổ biến bởi Lord Playfair</li>
                <li><strong>Bảng mã:</strong> Sử dụng bảng 5x5 với từ khóa</li>
                <li><strong>Loại:</strong> Mã hóa thay thế đôi (digraph substitution)</li>
                <li><strong>Độ bảo mật:</strong> Cao hơn Polybius và Caesar</li>
              </ul>
              <div class="mt-3 p-3 bg-dark rounded">
                <h6><i class="fas fa-graduation-cap me-2"></i>Ví dụ chi tiết:</h6>
                <div class="row">
                  <div class="col-sm-6">
                    <strong>Văn bản gốc:</strong><br />
                    <span class="text-mono">HELLO</span>
                  </div>
                  <div class="col-sm-6">
                    <strong>Mã hóa (key=MONARCHY):</strong><br />
                    <span class="text-mono text-info">BM OD ZB XD NA</span>
                  </div>
                </div>
                <hr />
                <small class="text-light"> Ghép thành cặp: HE LL OX (thêm X nếu lẻ), mã hóa từng cặp </small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal: Thông tin bổ sung -->
      <div class="modal fade" id="extraModal" tabindex="-1" aria-labelledby="extraModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content bg-additional text-light">
            <div class="modal-header border-0">
              <h5 class="modal-title" id="extraModalLabel"><i class="fas fa-lightbulb text-warning me-2"></i>Thông tin bổ sung</h5>
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-md-6">
                  <h6>Ưu điểm:</h6>
                  <ul>
                    <li>Bảo mật cao hơn mã hóa đơn</li>
                    <li>Khó bị phá bằng frequency analysis</li>
                    <li>Phù hợp với văn bản dài</li>
                  </ul>
                </div>
                <div class="col-md-6">
                  <h6>Nhược điểm:</h6>
                  <ul>
                    <li>Phức tạp hơn để implement</li>
                    <li>Cần từ khóa và bảng mã</li>
                  </ul>
                </div>
              </div>
              <div class="mt-3">
                <h6>Phương pháp phá mã:</h6>
                <ol>
                  <li><strong>Known Plaintext:</strong> Nếu biết một phần văn bản gốc</li>
                  <li><strong>Frequency Analysis:</strong> Phân tích tần suất cặp ký tự</li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <!-- Tools Section -->
        <div class="col-lg-6">
          <div class="cipher-tools">
            <h4><i class="fas fa-tools text-warning me-2"></i>Công cụ mã hóa/giải mã</h4>

            <div class="form-group">
              <label for="keyword" class="form-label">Từ khóa:</label>
              <input type="text" id="keyword" class="form-control" placeholder="Nhập từ khóa..." value="MONARCHY" />
              <small class="text-dark">Từ khóa được sử dụng để tạo ma trận mã hóa</small>
            </div>

            <div class="form-group">
              <label for="plaintext" class="form-label">Văn bản gốc:</label>
              <textarea id="plaintext" class="form-control" rows="4" placeholder="Nhập văn bản cần mã hóa...">HIDE THE GOLD</textarea>
              <small class="text-dark">Lưu ý: J sẽ được chuyển thành I, X được thêm vào giữa các chữ giống nhau</small>
            </div>

            <div class="d-flex gap-2 mb-3">
              <button class="btn btn-encrypt" onclick="encryptPlayfair()"><i class="fas fa-lock me-2"></i>Mã hóa</button>
              <button class="btn btn-decrypt" onclick="decryptPlayfair()"><i class="fas fa-unlock me-2"></i>Giải mã</button>
              <button class="btn btn-clear" onclick="clearAll()"><i class="fas fa-eraser me-2"></i>Xóa</button>
            </div>

            <div class="form-group">
              <label for="ciphertext" class="form-label">Kết quả:</label>
              <textarea id="ciphertext" class="form-control text-mono" rows="4" readonly placeholder="Kết quả sẽ hiển thị ở đây..."></textarea>
              <button class="btn btn-outline-warning btn-sm mt-2" onclick="copyResult()"><i class="fas fa-copy me-2"></i>Sao chép</button>
            </div>

            <div id="result-message" class="alert" style="display: none;"></div>
          </div>

          <!-- Rules Section -->
          <div class="cipher-tools mt-4">
            <h5><i class="fas fa-list-ol text-info me-2"></i>Quy tắc Playfair</h5>
            <ol>
              <li><strong>Cùng hàng:</strong> Dịch chuyển sang phải (vòng tròn)</li>
              <li><strong>Cùng cột:</strong> Dịch chuyển xuống dưới (vòng tròn)</li>
              <li><strong>Hình chữ nhật:</strong> Hoán đổi cột với nhau</li>
            </ol>
            <div class="bg-light p-2 rounded mt-3 cipher-example">
              <small class="text-dark"><strong>Ví dụ:</strong> HI → BM (hình chữ nhật), DE → OD (cùng hàng)</small>
            </div>
          </div>
        </div>

        <!-- Visualization Section -->
        <div class="col-lg-6">
          <div class="visualization-container">
            <h4><i class="fas fa-table text-warning me-2"></i>Ma trận Playfair</h4>
            <p class="text-dark">Ma trận 5x5 được tạo từ từ khóa:</p>
            <div id="playfair-matrix" class="text-center text-dark">
              <!-- Matrix will be generated by JavaScript -->
            </div>

            <div class="mt-4">
              <h6>Cách tạo ma trận:</h6>
              <ol class="small">
                <li>Ghi từ khóa, loại bỏ ký tự trùng lặp</li>
                <li>Điền các chữ cái còn lại theo thứ tự ABC</li>
                <li>I và J được gộp chung</li>
                <li>Sắp xếp thành lưới 5x5</li>
              </ol>
            </div>
          </div>

          <!-- Digraph Processing -->
          <div class="visualization-container mt-4">
            <h5><i class="fas fa-cogs text-secondary me-2"></i>Xử lý cặp ký tự</h5>
            <div id="digraph-processing">
              <p class="text-dark">Nhập văn bản và từ khóa để xem quá trình xử lý...</p>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./JS/script.js"></script>
    <script src="./JS/navbar.js"></script>
    <script src="./JS/footer.js"></script>
    <script src="./JS/playfair.js"></script>
  </body>
</html>
